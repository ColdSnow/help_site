# 转化变量

**定义：转化变量是一种强大的变量类型，可以根据不同的业务需求去配置一个转化变量的归因方式和持久性范围。随着归因模型的不同，持久性范围的不同，用户发生的事件将会归到或者不归到某一个转化变量的值上。**

除了标识符、名称和描述，转化变量还需要配置归因和失效两个配置项。


转化变量的归因计算是以自然天为单位的，也就是说当天发生的转化行为，需要第二天才能够在GrowingIO后台图表中进行分析。

### **归因方式**
当发生一个事件的时候，GrowingIO会通过转化变量中配置的归因模型，去计算应该将这个事件归到转化变量中的哪一个有效值上，转化变量目前支持以下三种归因模型：

* **最近（Most Recent）**

**当事件发生时，往前看，事件所有的权重将全部分配给转化变量中还在持久性范围之内并且离事件发生的时间点最近的值上。**

例如：

用户依次点击了三个内部活动，内部活动代码分别为：abcd0001, abcd0002和abcd0003。如果使用的转化变量的归因设置是最近，那么在之后当用户发生购买事件时，这个购买事件所有的权重将分配给abcd0003这个内部活动。

由于这个用户的操作，GrowingIO上将看到类似于这样的报表：

| **内部活动代码** | **订单量** |
| :--- | :--- |
| **abcd0003** | **+1** |

* **线性（Linear）**

**当事件发生时，往前看，事件所有的权重将平均分配所有还在持久性范围之内，还没有失效的那些值上。**

例如：

前面的那个用户点击三个内部活动的例子，如果转化变量设置的归因是线性，那么在之后用户发生购买事件时，这个购买事件所有的权重将平均分配给abcd0001，abcd0002，abcd0003这三个内部活动。

由于这个用户的操作，GrowingIO上将看到类似于这样的报表：

| **内部活动代码** | **订单量** |
| :--- | :--- |
| **abcd0001** | **+0.333** |
| **abcd0002** | **+0.333** |
| **abcd0003** | **+0.333** |

* **最初（First）**

**当事件发生时，往前看，事件所有的权重将全部分配给转化变量中还在持久性范围之内并且离事件发生的时间点最远的那个值上。从用户的角度来说也就是还在持久性范围之内的最初的那个值获得发生事件的所有权重。**

例如：

前面的那个用户点击三个内部活动的例子，如果转化变量设置的归因是最初，那么在之后用户发生购买事件时，这个购买事件所有的权重将分配给用户点击的第一个内部活动上。

由于这个用户的操作，GrowingIO上将看到类似于这样的报表：

| **内部活动代码** | **订单量** |
| :--- | :--- |
| **abcd0001** | **+1 ** |

请注意，虽然GrowingIO支持在声明并且使用了一段时间的某一个转化变量上进行更改归因方式的操作，但是归因方式的改变将导致该转化变量的报表上展现的数据将出现两种或者多种归因方式混合的情况。这将导致数据出现错误，从错误的数据得出的结论也是错误的。所以，GrowingIO建议重新启用新的转化变量来实现更改归因方式的需求。

### **失效时间**

对于转换变量来讲，失效时间是一个配置项。GrowingIO目前支持访问，一天，一周，一月这四种失效的配置项。这四种配置项的意义分别是：

1. 访问：随着用户在一个访问中不断的交互操作，一些值会保存在转化变量中，如果这个转化变量的失效设置为访问。那么当访问结束时保存在转化变量中的值会失效，在之后发生的事件不会归到这些失效的值上。
2. 一天：随着用户的交互操作，一些值会保存在转化变量中，如果这个转化变量的失效设置为一天，那么每一个值在保存到转化变量的时候都会有一个计时器，从这个值保存到转化变量的瞬间计时器开始一天的倒计时。在这一天之内发生的事件都可以归到这个转化变量中的值，但是一天的倒计时结束的时候，这个转化变量中的值会失效，之后发生的事件不能归到这个转化变量的值上。
3. 一周：和失效时间是一天的配置项类似，只是对于每一个保存到转化变量中的值来说，计时器的倒计时时间为一周。
4. 一月：和失效时间是一天的配置项类似，只是对于每一个保存到转化变量中的值来说，计时器的倒计时时间为一月。

例如，一个用户在周一早上七点的时候开始访问一个电子商务网站，在七点十五分的时候输入“手机”作为搜索词进行了一次站内搜索，在七点五十五分，访问结束。那么

* 如果失效时间是访问，保存在转化变量中的站内搜索词“手机”在七点五十五分失效。
* 如果失效是一天，保存在转化变量中的站内搜索词“手机”在周二早上的七点十五分失效。
* 如果失效是一周，保存在转化变量中的站内搜索词“手机”在下周一早上的七点十五分失效。
* 如果失效是一月，保存在转化变量中的站内搜索词“手机”将在三十天之后的早上七点十五分失效。

### **转化变量的归因模型**

转化变量通过归因配置项来确定某个具体的转化变量的归因模型。

### **转化变量的持久性范围**

转化变量通过失效配置项来确定某个具体的转化变量的持久性范围。

### **转化变量的使用场景**

转化变量可以用于回答下列业务问题：

* 使用最初归因模型，某个内部活动带来了多少注册，多少订单。

* 使用线性归因模型，内部搜索的效果怎样，某个具体的搜索词带来了多少订单，营业收入。

* 使用最近归因模型，同一个内部活动的不同入口分别带来了多少内部活动详情页面的浏览。

### 分析场景示例

在电商购物场景中，可将促使用户下单的前序行为如：活动页浏览、搜索、站内banner点击等，定义为转化变量，用于分解下单行为。例如，我们在用户进行搜索时，通过转化变量上传其输入的搜索词，即可在GrowingIO后台按以下方式分解不同搜索词带来的下单转化：

![](/assets/zhuanhuabianliang.png)

