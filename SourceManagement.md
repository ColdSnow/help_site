# 来源管理

**来源管理功能主要是用于解决在市场推广中广告流量的追踪问题。对于 Web 端，是通过使用 UTM 参数区分不同链接来源，从而统计不同广告链接的点击量。对于移动端，也是使用UTM参数创建链接来源，对同一个渠道进行细分从而区分从不同广告位跳转到安卓市场或 App Store 的流量。**

<font color='red'>注意：要使用来源管理功能安卓 SDK 版本不能低于0.9.91，IOS SDK 版本不能低于 0.9.32。</font>

##一、来源管理解决什么问题

###1. 细分网站的流量来源：

访问网站的用户，到底是从哪些广告位过来的？

能不能把不同广告位之间的流量，以及自然流量区分开，看看每个来源带了多少新用户？

###2. 为App Store区分渠道：

从App Store中下载App并激活的用户，到底是从哪些广告位过来的？

能不能把不同广告位之间的流量，以及自然流量区分开，看看每个来源带了多少新激活用户？

###3. 不同团队的二维码地推效果：

地推时，不同的地推团队都用同一个应用宝的下载链接生成二维码，能不能每个团队带来的新激活用户区分开？

如果能区分开，一个地推团队用同一个二维码，可以带来iOS和安卓两个平台的新激活用户，能不能把它们加到一起算？

###4. 百度M站关键词投放：
百度M站投放了若干关键词，不同关键词各自带来了多少App新激活用户，这些用户的后续行为如何？

###5. 其他细分流量来源的需求
#  
<a name="tech" />
##二、工作原理

###推广网站
###1. 创建并替换链接
您需要先在来源管理中创建一个包含各种UTM参数的GrowingIO短链接，然后用这个短链接替换您原来在广告位上放的链接。

###2. 用户访问链接并关联UTM参数
您的用户在点击广告位或扫码后，先访问GrowingIO短链接，然后再跳转到原来的广告落地页。服务器就可以把这个用户和广告链接对应的UTM参数建立关联。您在使用网页指标作图时，把这些UTM参数作为维度或者过滤条件。

###推广移动应用
###1. 创建并替换链接
您需要先在来源管理中创建一个包含各种UTM参数的GrowingIO短链接，然后用这个短链接替换您原来在广告位上放的链接。

###2. 用户访问链接
您的用户在点击广告位或扫码后，先访问GrowingIO短链接，然后再跳转到原来的广告链接。这样，我们的服务器就知道了这个手机设备访问过这个广告链接。

###3. 用户激活App
访问过广告链接的手机，后来下载了应用并打开，GrowingIO的SDK就会向服务器发送一条请求，同样包含手机设备信息，服务器就可以把它和访问广告链接的记录匹配起来。

###4. 关联UTM参数
跟广告链接匹配后，一台手机设备就会跟广告链接对应的UTM参数产生关联。您可以在使用移动端指标作图时，把这些UTM参数作为维度或者过滤条件。

<a name="howto" />
##三、使用方式

**1.界面介绍**
 
您可以在下图红框1的位置，切换网页和移动应用的来源；

点击下图红框2的位置，就可以创建一个新的来源。

![](/assets/3.0来源管理1)

**2.移动端说明**

a.目标链接：请填写投放广告时所用的落地页链接，或者应用下载地址;

b.安卓软件包名称：技术上的名称叫 Package Name，可以向安卓开发咨询具体信息;

c.iOS软件包名称：技术上的名称叫BundleID，可以向iOS开发咨询具体信息。

![](/assets/创建新来源表单.png)
**3.数据表现**

每条来源都会显示对应的来源链接访问次数，以及新用户数。其中，“新用户”的定义是：通过这个来源访问了广告，然后下载了 App 并在过去90天内首次激活的用户。

由于一个来源可能带来两个平台的新用户，在详情中把它们做了细分。其中，安卓新增用户 + iOS新增用户 = 新用户。

![](/assets/来源管理数据表现)


**4.延伸使用**

在来源管理中定义的UTM参数（广告来源、广告媒介等）均可作为维度来支持单图创建和用户分群。


a.设置维度&指标，即可生成单图，灵活查看各广告渠道带来的用户指标表现；![](/assets/WechatIMG24.jpeg)


b.用户分群中针对各渠道的用户做定义，便于长期追踪该用户群体的数据表现。![](/assets/用户分群用来源管理.png)

<a name="compat" />
    
    
##四、对各个广告平台支持

### **1.推广网站**

支持现有的主流广告投放方式。


### **2.推广移动应用**

**基本规则：**

a.如果用户点击您投放的广告后，必须经过一个广告落地页，而且落地页网址可以用GIO链接替换，那么来源管理就能够统计这个广告。

b.如果用户点击您投放的广告后，直接通过下载地址开始下载应用，那么来源管理就能够统计这个广告。
<a name="IDFA" />

**主流站点支持情况：**

目前可以在公众号、粉丝通、朋友圈、微博和智汇推等平台使用我们的短链。

GrowingIO也正在与广点通、今日头条和Inmobi等其他站点进行合作洽谈。

**P.S. 配置IDFA方式：**

GrowingIO SDK 默认使用 IDFV 作为设备唯一号。

若需使用 IDFA 作为设备唯一号，那么在 +[Growing startWithAccountId:] 方法调用前调用 [Growing setDeviceIDModeToIDFA] 方法即可，注意必须在 main 函数里调用（包括 0.9.45 及以后的版本）。

<a name="faq" />
##五、FAQ

###移动应用相关

**Q：来源管理生成链接访问后，多久才能看到访问数据？**

A：广告链接被访问后，对应的访问数据会延迟一小时在 GrowingIO 平台展现。
# 
**Q：来源管理匹配广告访问和 App 启动的设备时，使用了哪些信息标识一台手机设备？**

A：使用了IP地址 + 浏览器的User-Agent（简称UA），来共同标识一台设备。
# 
**Q：如果使用 IP 地址来标识设备，当 IP 地址改变时，就不能准确标识一台设备了吗？**

A：是的。如果用户在访问了广告链接后切换网络，如蜂窝网络（3G/4G）与Wifi之间的切换，会导致IP改变，此时就无法把下载打开App的设备与访问广告链接的设备匹配上。
# 
**Q：一台手机访问广告后，这台设备的信息在服务器上保存多久？**

A：48小时。在访问广告后的48小时内，如果同一台手机安装了应用，都会被匹配到这次广告访问。超过48小时，不会被匹配到这次广告访问。
# 
**Q：为什么来源管理不支持部分广告平台的数据监控？**

A：有些广告平台在点击广告后，没有链接跳转，或者必须跳转到固定域名的链接。然后通过服务器访问GIO的链接。这时GIO获取的到的IP是服务器的IP，而不是用户手机设备的IP，因此无法进行准确匹配。
# 
**Q：我创建来源后，生成了广告链接，然后应该怎么办？
**
A：请用GIO的广告链接，替换您原来投放广告的链接。当用户访问GIO的链接后，会自动跳转到您原来的广告链接。
# 
**Q：安卓的包名和 iOS 的包名分别是什么？**

A：包名用来在技术上唯一标识一个应用，安卓的包名叫Package Name，iOS的包名叫BundleID。如果您不了解，可以咨询移动端开发人员。
# 
**Q：对于一条来源，现在界面上只有新用户的总量，我怎么才能按天看新用户量呢？**

A：您可以在创建单图时，选择这条来源对应的各个UTM参数作为过滤条件，这样就可以按照您想要的时间粒度来查看这个图表。
# 
**Q：在 IOS9 中，Apple 提供了SFSafariViewController 这个控件，通过它可以让 App 访问浏览器 Cookie 的数据，是不是可以实现更加精确的统计？**

A：这个方法在原理上的确可以实现更加精确的统计。但Apple在最新的App Store提交审核说明中，要求App开发商在使用这个控件追踪用户时，向用户申请权限。这意味着它能否实现精确地追踪，取决于每个用户的意志。具体信息请见下方链接的5.11-iv：https://developer.apple.com/app-store/review/guidelines/ 。



















